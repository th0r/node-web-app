{% extends 'admin/layouts/default.html' %}
{% import 'admin/macros/form.html' as form %}

{% set pageType = 'users' %}

{% block navLineItems %}
    {{ navLineItem('Пользователи', adminUsersPath()) }}
    {% if user %}
        {{ navLineItem(user.email, editAdminUserPath(user), true) }}
    {% else %}
        {{ navLineItem('Неизвестный пользователь', null, true) }}
    {% endif %}
{% endblock %}

{% block header %}
    {% if user %}
        {{ header('Пользователь ' + user.email, 'Редактирование учетной записи пользователя') }}
    {% endif %}
{% endblock %}

{% block content %}
    {% if user %}
        <form class="form-horizontal" action="{{ adminUserPath(user) | e }}" method="post" novalidate
              v-component="form"
              v-with="userForm">
            <input type="hidden" name="_method" value="put">
            <fieldset>
                <div class="widget row-fluid">
                    <div class="well">
                        {{ form.error() }}

                        <div class="control-group">
                            {{ form.input('ID', '_id', user._id.toString(), { readonly: true }) }}
                        </div>

                        <div class="control-group">
                            {{ form.input('Email', 'email', user.email, { type: 'email' }) }}
                        </div>

                        <div class="form-actions align-center">
                            <button type="submit" class="btn btn-primary"
                                    v-attr="disabled: !submittionAllowed">Сохранить</button>
                            <button type="reset" class="btn"
                                    v-attr="disabled: submitting">Сбросить изменения</button>
                        </div>

                    </div>
                </div>
            </fieldset>
        </form>
    {% else %}
        <div class="alert sans align-center margin">Пользователь не найден</div>
    {% endif %}
{% endblock %}

{% block pageScript %}
<script>
    App.data = {
        userForm: {}
    };

    App.page = new Vue({
        el: document.documentElement,
        data: App.data
    });
</script>
{% endblock %}